import{m as e,e as a,f as l,o as u,g as n,w as t,v as s,h as o,k as i,F as v,i as r,n as d,r as c,b as f}from"./vendor.21423cea.js";import{c as p,v as m}from"./index.353ec8bd.js";import{_ as g}from"./index.dec6348a.js";const y={key:0},h=r("認證碼："),b={key:1},k=r("收到認證碼的信箱："),V=["disabled"],q={key:3};var w=g(d({name:"Validate",components:{ValidateForm:{setup(r){const d=e();console.log(d.query);const c=a(""),f=a(""),g=a(""),w=a(!1),I=a(!1),j=a(!1),x=p().email().required(),D=async()=>{if(j.value=!0,0===c.value.length)return j.value=!1,void alert("請輸入認證碼");if(0===f.value.length){await x.isValid(g.value)?await m(c.value,null,g.value):(j.value=!1,alert("請輸入有效的信箱地址"))}else await m(c.value,f.value,null);console.log("res: ",res)};return l((()=>{c.value=d.query.code||"",w.value=c.value.length<=0,liff.init({liffId:"1656419833-74JqODyP"}).then((()=>{if(liff.isLoggedIn()&&liff.isInClient()){const e=liff.getDecodedIDToken();f.value=e&&e.sub,!w.value&&f.value.length>0?D():I.value=f.value.length<=0}else I.value=!0})).catch((e=>{console.log(e),w.value=!0,I.value=!0}))})),(e,a)=>(u(),n(v,null,[w.value?(u(),n("p",y,[h,t(o("input",{type:"email","onUpdate:modelValue":a[0]||(a[0]=e=>c.value=e),placeholder:"請輸入認證碼"},null,512),[[s,c.value]])])):i("",!0),I.value?(u(),n("p",b,[k,t(o("input",{type:"email","onUpdate:modelValue":a[1]||(a[1]=e=>g.value=e),placeholder:"請輸入收到認證碼的信箱"},null,512),[[s,g.value]])])):i("",!0),w.value||I.value?(u(),n("button",{key:2,type:"button",class:"btn",onClick:a[2]||(a[2]=e=>D()),disabled:j.value},"送出",8,V)):(u(),n("p",q,"認證中，請稍候..."))],64))}}}}),[["render",function(e,a,l,n,t,s){const o=c("ValidateForm");return u(),f(o)}]]);export{w as default};
